# План автоматизации тестирования
## Автоматизируемые сценарии

**Проверяемая функциональность:** Приложение должно в собственной СУБД сохранять информацию о том, каким способом был
совершён платёж и успешно ли он был совершён (при этом данные карт сохранять не допускается).

Карты, предоставленные для тестирования в файле data.json:

- 4444 4444 4444 4441, status "APPROVED"
- 4444 4444 4444 4442, status "DECLINED"

Характеристика вводимых валидных тестовых данных:

- поле *"Номер карты"*: 16 цифр
- поле *"Месяц"*: двузначное числовое значение от 01 до 12
- поле *"Год"*: двузначное числовое значение;
- поле *"Владелец"*: допустимые значения из латинских букв, дефисов, пробелов
- поле *"CVC/CCV"*: три цифры

*Приведенные ниже сценарии тестирования необходимо проверить для БД MySql и PostgreSQL*

#### Happy path

Преднастройка: Открыть страницу http://localhost:8080.
1) "_Успешная покупка тура картой со статусом APPROVED_"

- Нажать "Купить"
- Вввести в поля формы валидные данные
- Нажать "Отправить"

Ожидаемый результат: Оплата проходит(данные об оплате появляются в базе). Появляется сообщение об успешной покупке тура.
2) "_Успешная покупка тура в кредит картой со статусом APPROVED_"

- Нажать "Купить в кредит"
- Вввести в поля формы валидные данные
- Нажать "Отправить"

Ожидаемый результат: Оплата проходит(данные об оплате появляются в базе). Появляется сообщение об успешной покупке тура.
3) "_Покупка тура картой со статусом DECLINED_"

- Нажать "Купить"
- Вввести в поля формы валидные данные
- Нажать "Отправить"

Ожидаемый результат: Оплата не проходит(в базе данных появляется информация, что покупка отклонена). Появляется
сообщение об ошибке

4) "_Покупка тура в кредит картой со статусом DECLINED_"

- Нажать "Купить в кредит"
- Вввести в поля формы валидные данные
- Нажать "Отправить"

Ожидаемый результат: Оплата не проходит(в базе данных появляется информация, что покупка отклонена). Появляется
сообщение об ошибке

#### Sad path

**Примечание:** Сценарии применяются для обоих способов оплаты тура (обычной дебетовой картой, выдачей кредита по данным
банковской карты)

Преднастройка:
Открыть страницу http://localhost:8080. Нажать "Купить" - для оплаты дебетовой картой. Нажать "Купить в кредит" - для
оплаты кредита по карте

5) "_Ввод неполных данных во все поля при покупке_"

- Зайти на страницу покупки
- Нажать кнопку "купить"
- Ввести номер карты: 4444 4444 4444 444
- Ввести месяц: 1
- Ввести год: 2
- Ввести владельца: Ivan
- Ввести cvc: 12
- Нажать кнопку: "продолжить"

Ожидаемый результат: Поля подсчечиваются красным, кнопка "продолжить" не кликабельна, появляется подсказка, что не все поля заполнены Запись в БД не появляется

6) "_Проверка поля номер карты_"

1. Ввести одинаковые цифры
2. Ввести нули
3. Ввести 4 цифры
4. Ввести 17 цифр
5. Ввести текст в поле

Ожидаемый результат:

1. Данные не проходят проверку, кнопка "продолжить" не кликабельна, система выдает ошибку, что данных карты не существует, запись в БД не появляется
2. Данные не проходят проверку, кнопка "продолжить" не кликабельна, система выдает ошибку, что данные карты введены некорректно, запись в БД не появляется
3. Кнопка "продолжить" не кликабельна, система подсвечивает поле и дает подсказку, что данные введены не полностью, запись в БД не появляется
4. Поле не дает ввести 17 цифр, максимальное количество допустимых символов 16, запись в БД не появляется
5. Поле не дает ввести текст, возможен только ввод цифр, запись в БД не появляется

7) "_Проверка поля владелец_"

1. Ввести 1 букву
2. Ввести невалидного владельца
3. Ввести 20 букв без пробела
4. Ввести только фамилию на английском
5. Ввести русские буквы
6. Ввести цифры
7. Ввести строчные буквы
8. Ввести ФИ слитно

Ожидаемый результат:

1. Кнопка "продолжить" не кликабельна, система подсвечивает поле и дает подсказку, что данные введены не полностью, запись в БД не появляется
2. Данные не проходят проверку, кнопка "продолжить" не кликабельна, система выдает ошибку, что данные введены некорректно, запись в БД не появляетс
3. Данные не проходят проверку, кнопка "продолжить" не кликабельна, система выдает ошибку, что данные введены некорректно, запись в БД не появляется
4. Кнопка "продолжить" не кликабельна, система подсвечивает поле и дает подсказку, что данные введены не полностью, запись в БД не появляется
5. Кнопка "продолжить" не кликабельна, система подсвечивает поле и дает подсказку, что данные введены не полностью, запись в БД не появляется
6. Поле не дает ввести русские буквы, ввод возможен только на английском, запись в БД не появляется
7. Поле не дает ввести цифры, возможен только ввод букв, запись в БД не появляется
8. Поле конвертирует буквы в прописные автоматически, запись в БД не появляется
9. Данные не проходят проверку, кнопка "продолжить" не кликабельна, система выдает ошибку, что данные введены некорректно, запись в БД не появляется
10. Данные не проходят проверку, кнопка "продолжить" не кликабельна, система выдает ошибку, что данные введены некорректно, запись в БД не появляется

8) "_Проверка поля месяц_"

1. Ввести невалидный месяц
2. Ввести буквы
3. Ввести 3 цифры
4. Ввести нули

Ожидаемый результат:

1. Кнопка "продолжить" не кликабельна, система подсвечивает поле и дает подсказку, что данные введены некорректно, запись в БД не появляется
2. Поле не дает ввести буквы, возможен только ввод цифр, запись в БД не появляется
3. Кнопка "продолжить" не кликабельна, система подсвечивае, т поле и дает подсказку, что данные введены не полностью, запись в БД не появляется
4. Поле не дает ввести больше двух цифр, запись в БД не появляется
5. Кнопка "продолжить" не кликабельна, система подсвечивает поле и дает подсказку, что данные введены некорректно, запись в БД не появляется

9) "_Проверка поля год_"

1. Ввести невалидный год
2. Ввести буквы
3. Ввести 3 цифры
4. Ввести нули

Ожидаемый результат:

1. Кнопка "продолжить" не кликабельна, система подсвечивает поле и дает подсказку, что данные введены некорректно, запись в БД не появляется
2. Поле не дает ввести буквы, возможен только ввод цифр, запись в БД не появляется
3. Кнопка "продолжить" не кликабельна, система подсвечивает поле и дает подсказку, что данные введены не полностью, запись в БД не появляется
4. Поле не дает ввести больше двух цифр, запись в БД не появляется
5. Кнопка "продолжить" не кликабельна, система подсвечивает поле и дает подсказку, что данные введены некорректно, запись в БД не появляется

10) "_Проверка поля cvv_"

1. Ввести невалидный cvv
2. Ввести буквы
3. Ввести 4 цифры
4. Ввести нули

Ожидаемый результат:

1. Кнопка "продолжить" не кликабельна, система подсвечивает поле и дает подсказку, что данные введены некорректно, запись в БД не появляется
2. Поле не дает ввести буквы, возможен только ввод цифр, запись в БД не появляется
3. Поле не дает ввести больше четырех цифр, запись в БД не появляется
4. Кнопка "продолжить" не кликабельна, система подсвечивает поле и дает подсказку, что данные введены некорректно, запись в БД не появляется

11) "_Оплата по карте при наличии одного незаполненного поля_"

предусловия:
- после каждого шага нажать кнопку "продолжить"
  Шаги:
1. Ввести все данные данные кроме номера карты
2. Ввести все данные кроме владельца
3. Ввести все данные кроме года
4. Ввести все данные кроме месяца
5. Ввести все данные кроме cvv

Ожидаемый результат: кнопка "продолжить" не кликабельна после каждого шага, система подсвечивает пустое поле красным и выдает подсказку "заполните поле", запись в БД не появляется

12) "_Покупка тура по карте с истекшим сроком годности_"

Шаги:
1. Ввести валидный номер карты
2. Ввести прошлый месяц
3. Ввести текуший год
4. Ввести валидного владельца
5. Ввести валидный cvv

Ожидаемый результат: Оплата отклонена, банк не одобрил операцию. Появилось уведомление с текстом "Ошибка! Банк отказал в проведении операции". В БД появилась запись со статусом DECLINED

## Используемые инструменты
* IntelliJ IDEA - языком написания автотестов выбрана Java
* Gradle - удобная система автоматической сборки
* JUnit5 - последняя версия фреймворка для написания автотестов
* Docker - удобная программа для создания контейнеров с нужными настройками
* MySQL, PostgreSQL - используемые в проекте СУБД
* Selenide - для работы с селекторами
* Lombok - для удобной генерации конструкторов и геттеров/сеттеров
* Faker - для генерации данных пользователей
* Git - для хранения версий кода
* Allure - удобный инструмент для отчетности

## Возможные риски
Возможны сбои в отправке формы при большой нагрузке. Нагрузочное тестирование не проводится.
Возможность уронить сайт. Трудности с настройкой и запуском контейнеров Docker.

## Интервальная оценка
100 часов

## План сдачи работ
* План автоматизации - 23 июня
* Авто-тесты - 7 июля
* Результаты прогона тестов и отчет по по итогам тестирования - 10 июля
* Документы по итогам автоматизации - 13 июля